import{a as b,u as g,r as f,j as e,O as x,b as j,c as E}from"./index-DLfbEI9z.js";import{v as P,a as C,b as O,c as v}from"./validaters-tCnCAbs1.js";import{O as N}from"./Card-CJ_YK3Fc.js";import{O as F,a as m,b as q}from"./FormMessage-BwylYeMl.js";import"./Alert-CW5rNamZ.js";import"./info-BE2V2Yin.js";function A(){const{n:p}=b(),{t:n}=g(),[a,y]=f.useState({username:"",password:"",confirmPassword:"",email:"",playername:""}),[c,u]=f.useState(!1),[o,d]=f.useState(null),w=()=>{const r={},s=P(a.username),l=C(a.password),t=O(a.email),h=v(a.playername);return s&&(r.username=s),l&&(r.password=l),t&&(r.email=t),h&&(r.playername=h),a.confirmPassword?a.password!==a.confirmPassword&&(r.confirmPassword="Passwords do not match"):r.confirmPassword="Please confirm your password",d({fields:r}),Object.keys(r).length===0},i=r=>{const{name:s,value:l}=r.target;y(t=>({...t,[s]:l})),o?.fields?.[s]&&d(t=>({...t,fields:{...t.fields,[s]:""}}))},k=async r=>{if(u(!0),d(null),!w()){u(!1);return}try{const{confirmPassword:s,...l}=a;await E.register(l),p("home")}catch(s){d(s.error||n("An error occurred"))}finally{u(!1)}};return e.jsx("section",{className:"oyk-page oyk-auth",children:e.jsxs("div",{className:"oyk-auth-container",children:[e.jsxs("div",{className:"oyk-auth-header",children:[e.jsx("h1",{className:"oyk-auth-header-title",children:"Create an account"}),e.jsxs("p",{className:"oyk-auth-header-subtitle",children:["Or"," ",e.jsx(x,{routeName:"login",className:"oyk-auth-header-subtitle",children:"sign in to an existing account"})]})]}),e.jsx(N,{children:e.jsxs(F,{className:"oyk-auth-form",onSubmit:k,isLoading:c,children:[e.jsx(m,{label:n("Username"),name:"username",defaultValue:a.username,onChange:i,hasError:o?.fields?.username,required:!0,block:!0}),e.jsx(m,{label:n("Password"),name:"password",type:"password",defaultValue:a.password,onChange:i,hasError:o?.fields?.password,required:!0,block:!0}),e.jsx(m,{label:n("Confirm Password"),name:"confirmPassword",type:"password",defaultValue:a.confirmPassword,onChange:i,hasError:o?.fields?.confirmPassword,required:!0,block:!0}),e.jsx(m,{label:n("Email"),name:"email",type:"email",defaultValue:a.email,onChange:i,hasError:o?.fields?.email,required:!0,block:!0}),e.jsx(m,{label:n("Playername"),name:"playername",defaultValue:a.playername,onChange:i,hasError:o?.fields?.playername,required:!0,block:!0}),o?.message&&e.jsx(q,{hasError:o?.message}),e.jsx("div",{className:"oyk-form-actions",children:e.jsx(j,{type:"submit",color:"primary",disabled:c,block:!0,children:c?"Creating account...":"Create account"})})]})})]})})}export{A as default};
