import{a as g,u as x,r as d,j as e,O as j,b,c as w}from"./index-DLfbEI9z.js";import{v as O,a as E}from"./validaters-tCnCAbs1.js";import{O as N}from"./Card-CJ_YK3Fc.js";import{O as S,a as h,b as v}from"./FormMessage-BwylYeMl.js";import"./Alert-CW5rNamZ.js";import"./info-BE2V2Yin.js";function R(){const{n:f}=g(),{t:l}=x(),[r,y]=d.useState({username:"",password:""}),[u,c]=d.useState(!1),[t,o]=d.useState(null),p=()=>{const a={},s=O(r.username),n=E(r.password);return s&&(a.username=s),n&&(a.password=n),o({fields:a}),Object.keys(a).length===0},m=a=>{const{name:s,value:n}=a.target;y(i=>({...i,[s]:n})),t?.fields?.[s]&&o(i=>({...i,fields:{...i.fields,[s]:""}}))},k=async a=>{if(c(!0),o(null),!p()){c(!1);return}try{await w.login(r),f("home")}catch(s){o(s.error||l("An error occurred"))}finally{c(!1)}};return e.jsx("section",{className:"oyk-page oyk-auth",children:e.jsxs("div",{className:"oyk-auth-container",children:[e.jsxs("div",{className:"oyk-auth-header",children:[e.jsx("h1",{className:"oyk-auth-header-title",children:"Sign in to your account"}),e.jsxs("p",{className:"oyk-auth-header-subtitle",children:["Or"," ",e.jsx(j,{routeName:"register",className:"oyk-auth-header-subtitle",children:"create a new account"})]})]}),e.jsx(N,{children:e.jsxs(S,{className:"oyk-auth-form",onSubmit:k,isLoading:u,children:[e.jsx(h,{label:l("Username"),name:"username",defaultValue:r.username,onChange:m,hasError:t?.fields?.username,required:!0,block:!0}),e.jsx(h,{label:l("Password"),name:"password",type:"password",defaultValue:r.password,onChange:m,hasError:t?.fields?.password,required:!0,block:!0}),t?.message&&e.jsx(v,{hasError:t?.message}),e.jsx("div",{className:"oyk-form-actions",children:e.jsx(b,{type:"submit",color:"primary",disabled:u,block:!0,children:u?"Signing in...":"Sign in"})})]})})]})})}export{R as default};
